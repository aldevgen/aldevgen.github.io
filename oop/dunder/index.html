<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> TP2 | Alanna DEVLIN GÉNIN </title> <meta name="author" content="Alanna DEVLIN GÉNIN"> <meta name="description" content="Utilisation des méthodes spéciales et des décorateurs en Python. "> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link defer href="/assets/css/bootstrap-toc.css?7c40ca5fc967bdc4e6b1182620bbd681" rel="stylesheet"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%91%A9%F0%9F%8F%BC%E2%80%8D%F0%9F%92%BB&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://aldevgen.github.io/oop/dunder/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Alanna</span> DEVLIN GÉNIN </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">CV </a> </li> <li class="nav-item "> <a class="nav-link" href="/skills/">Skills </a> </li> <li class="nav-item "> <a class="nav-link" href="/formations/">Formations </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="mt-5" role="main"> <div class="container-sidebar"> <div class="row"> <div class="col-sm-3"> <nav id="toc-sidebar" class="sticky-top"></nav> </div> <div class="col-sm-9"> <div class="post"> <article> <h1 id="méthodes-spéciales">Méthodes spéciales</h1> <p>Les <code class="language-plaintext highlighter-rouge">méthodes spéciales</code>, aussi appelées méthodes magiques ou méthodes du double underscore (dunder), sont des méthodes prédéfinies en Python qui permettent de surcharger le comportement des opérateurs et des fonctions intégrées. Ces méthodes sont appelées automatiquement par l’interpréteur Python en fonction de l’opération effectuée.</p> <h2 id="exercice-1--traîneau-de-la-mère-noël">Exercice 1 : traîneau de la Mère Noël</h2> <p>La Mère Noël souhaite optimiser la distribution des cadeaux en traîneau. Pour cela, elle a besoin de calculer la capacité de son traîneau en fonction de la taille des cadeaux.</p> <p>La Mère Noël veut également calculer le temps de chargement des cadeaux dans le traineau. Pour cela, cela elle vous demande de créer un décorateur <code class="language-plaintext highlighter-rouge">@timer</code> qui permet de mesurer le temps d’exécution d’une méthode.</p> <pre><code class="language-mermaid">classDiagram
    class Gift {
        + size : string
        + __init__(size: string)
        + compute_weight() float
        + compute_time() float
        + wrap_gift() void
    }

    class Sleigh {
        + capacity : float
        + current_capacity : float
        + gifts : list
        + __init__(capacity: float)
        + add_gift(gift: Gift) void
        + remove_gift(gift: Gift) void
        + compute_free_capacity() float
        + __len__() int
        + __eq__(other: Sleigh) bool
        + __lt__(other: Sleigh) bool
        + __gt__(other: Sleigh) bool
    }

    Gift --&gt; Sleigh : "contained in"

</code></pre> <p>Définissez une classe <code class="language-plaintext highlighter-rouge">Gift</code> qui permet de représenter un cadeau, caractérisé par sa taille. Les cadeaux sont classés en trois catégories : Small, Medium et Large qui ont les caractéristiques suivantes :</p> <table> <thead> <tr> <th>Taille</th> <th>Poids</th> <th>Temps d’emballage</th> </tr> </thead> <tbody> <tr> <td>Small</td> <td>1 kg</td> <td>1 seconde</td> </tr> <tr> <td>Medium</td> <td>2 kg</td> <td>3 secondes</td> </tr> <tr> <td>Large</td> <td>5 kg</td> <td>10 secondes</td> </tr> </tbody> </table> <p><br></p> <p>La classe <code class="language-plaintext highlighter-rouge">Gift</code> aura les méthodes suivantes :</p> <ul> <li> <code class="language-plaintext highlighter-rouge">__init__(size: str)</code> : constructeur d’un cadeau à partir de sa taille.</li> <li> <code class="language-plaintext highlighter-rouge">compute_weight()</code> : méthode décorée par <code class="language-plaintext highlighter-rouge">@timer</code> qui renvoie le poids du cadeau.</li> <li> <code class="language-plaintext highlighter-rouge">compute_time()</code> : méthode décorée par <code class="language-plaintext highlighter-rouge">@timer</code> qui renvoie le temps d’emballage du cadeau.</li> <li> <code class="language-plaintext highlighter-rouge">wrap_gift()</code> : méthode décorée par <code class="language-plaintext highlighter-rouge">@timer</code> qui attend le temps d’emballage du cadeau (i.e. <code class="language-plaintext highlighter-rouge">time.sleep()</code>)</li> </ul> <p>Définissez une classe <code class="language-plaintext highlighter-rouge">Sleigh</code> qui permet de calculer la capacité du traîneau en fonction de la taille des cadeaux. La classe <code class="language-plaintext highlighter-rouge">Sleigh</code> comportera au moins les méthodes suivantes :</p> <ul> <li> <code class="language-plaintext highlighter-rouge">__init__(capacity: float)</code> : constructeur d’un traîneau à partir de sa capacité.</li> <li> <code class="language-plaintext highlighter-rouge">compute_free_capacity()</code> : renvoie la capacité restante du traîneau.</li> <li> <code class="language-plaintext highlighter-rouge">add_gift(gift: Gift)</code> : ajoute un cadeau au traîneau (seulement si la capacité du traîneau est suffisante).</li> <li> <code class="language-plaintext highlighter-rouge">remove_gift(gift: Gift)</code> : retire un cadeau du traîneau.</li> <li> <code class="language-plaintext highlighter-rouge">__len__()</code> : renvoie la capacité du traîneau.</li> <li> <code class="language-plaintext highlighter-rouge">__eq__(other: Sleigh)</code> : compare si les traîneaux ont la même capacité.</li> <li> <code class="language-plaintext highlighter-rouge">__lt__(other: Sleigh)</code> : compare si la capacité du traîneau est inférieure à celle d’un autre traîneau.</li> <li> <code class="language-plaintext highlighter-rouge">__gt__(other: Sleigh)</code> : compare si la capacité du traîneau est supérieure à celle d’un autre traîneau.</li> </ul> <p>Créer une classe main qui permet de tester les classes <code class="language-plaintext highlighter-rouge">Gift</code> et <code class="language-plaintext highlighter-rouge">Sleigh</code>.</p> <h2 id="exercice-2--points-du-plan">Exercice 2 : points du plan</h2> <p>Définissez une classe <code class="language-plaintext highlighter-rouge">Point</code> pour représenter les points du plan rapporté à une origine fixée. Les coordonnées d’un point sont ici deux nombres flottants <code class="language-plaintext highlighter-rouge">x</code>, <code class="language-plaintext highlighter-rouge">y</code>, qui sont deux attributs <strong>privés</strong>.</p> <pre><code class="language-mermaid">classDiagram
    class Point {
        # x: float
        # y: float
        + x() float
        + y() float
        + r() float
        + t() float
        + __str__() string
        + __eq__(other: Point) bool
        + __add__(other: Point) Point
        + __sub__(other: Point) Point
        + homothety(k: float) void
        + translation(dx: float, dy: float) void
        + rotation(a: float) void
    }

</code></pre> <p>La classe <code class="language-plaintext highlighter-rouge">Point</code> comportera au moins les méthodes suivantes :</p> <ul> <li> <code class="language-plaintext highlighter-rouge">__init__(x, y)</code> : constructeur d’un point à partir de ses coordonnées cartésiennes.</li> <li>Les méthodes <code class="language-plaintext highlighter-rouge">x()</code> et <code class="language-plaintext highlighter-rouge">y()</code> retournent les coordonnées cartésiennes du point. Les méthodes <code class="language-plaintext highlighter-rouge">r()</code> et <code class="language-plaintext highlighter-rouge">t()</code> retournent les coordonnées polaires du point (voir ci-dessous). Ces 4 méthodes sont définies comme des propriétés.</li> <li> <code class="language-plaintext highlighter-rouge">__str__()</code> : renvoie les coordonnées du point sous format texte. Par exemple, si on crée un point d’abscisse 2 et d’ordonnée 3 (i.e. <code class="language-plaintext highlighter-rouge">Point(x=2, y=3)</code>), la fonction retournera \((2.0, 3.0)\).</li> <li> <code class="language-plaintext highlighter-rouge">__eq__(other)</code> : compare si les points sont identiques (i.e. ont les mêmes coordonnées).</li> <li> <code class="language-plaintext highlighter-rouge">__add__(other)</code> : additionne les coordonnées de deux points pour obtenir un nouveau point.</li> <li> <code class="language-plaintext highlighter-rouge">__sub__(other)</code> : soustrait les coordonnées de deux points pour obtenir un nouveau point.</li> <li> <code class="language-plaintext highlighter-rouge">homothety(k)</code> : applique au point une homothétie de centre \((0, 0)\) et de rapport \(k\) (k est un flottant). Pour cela, on multiplie les coordonnées \((x, y)\) par \(k\) pour obtenir \((kx, ky)\).</li> <li> <code class="language-plaintext highlighter-rouge">translation(dx, dy)</code> : applique au point une translation de vecteur \((dx, dy)\). Cela consiste à remplacer \((x, y)\) par \((x + dx, y + dy)\).</li> <li> <code class="language-plaintext highlighter-rouge">rotation(a)</code> : applique au point une rotation de centre \((0, 0)\) et d’angle \(a\). Une manière – qui n’est pas la plus efficace – de faire cela consiste à calculer les coordonnées polaires \((r, t)\) correspondant à \((x, y)\) puis les coordonnées cartésiennes \((x′, y′)\) correspondant à \((r, t + a)\).</li> </ul> <h4 id="rappel-des-formules">Rappel des formules</h4> <ul> <li>Coordonnées cartésiennes à partir des coordonnées polaires : \(x = r cos(t)\) et \(y = r sin(t)\)</li> <li>Coordonnées polaires à partir des coordonnées cartésiennes : \(r = \sqrt{x^2 + y^2}\) et \(t = atan2(y, x)\)</li> </ul> </article> </div> </div> </div> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> Alanna DEVLIN GÉNIN - Last updated: 22 October 2025 - © 2025 </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/mermaid@10.7.0/dist/mermaid.min.js" integrity="sha256-TtLOdUA8mstPoO6sGvHIGx2ceXrrX4KgIItO06XOn8A=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/d3@7.8.5/dist/d3.min.js" integrity="sha256-1rA678n2xEx7x4cTZ5x4wpUCj6kUMZEZ5cxLSVSFWxw=" crossorigin="anonymous"></script> <script>let mermaidTheme=determineComputedTheme();document.addEventListener("readystatechange",()=>{"complete"===document.readyState&&(document.querySelectorAll("pre>code.language-mermaid").forEach(e=>{const t=e.textContent,d=e.parentElement;d.classList.add("unloaded");let a=document.createElement("pre");a.classList.add("mermaid");const n=document.createTextNode(t);a.appendChild(n),d.after(a)}),mermaid.initialize({theme:mermaidTheme}),"undefined"!=typeof d3&&window.addEventListener("load",function(){d3.selectAll(".mermaid svg").each(function(){var e=d3.select(this);e.html("<g>"+e.html()+"</g>");var t=e.select("g"),d=d3.zoom().on("zoom",function(e){t.attr("transform",e.transform)});e.call(d)})}))});</script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script defer src="/assets/js/bootstrap-toc.js?e9ca4ea11a9ae20ade46a9ba7941fa91"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> </body> </html>